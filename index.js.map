{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = '52417651-378a9ae18bca7d74fedb43ebe'; \n\nexport async function fetchImages(query, page = 1, perPage = 12) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return {\n      hits: response.data.hits || [],\n      totalHits: response.data.totalHits || 0,\n    };\n  } catch (error) {\n    console.error(\"Pixabay fetch error:\", error);\n    return { hits: [], totalHits: 0 };\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\nconst loader = document.querySelector(\".loader\");\n\nexport function clearGallery(gallery) {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.style.display = \"block\";\n}\n\nexport function hideLoader() {\n  loader.style.display = \"none\";\n}\n\nexport function renderGallery(images, gallery, replace = true) {\n  const markup = images\n    .map(\n      (hit) => `\n      <li class=\"gallery-item\">\n        <a href=\"${hit.largeImageURL}\">\n          <img src=\"${hit.webformatURL}\" alt=\"${hit.tags.replace(/\"/g, \"&quot;\")}\" width=\"300\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p><b>Likes:</b> ${hit.likes}</p>\n          <p><b>Views:</b> ${hit.views}</p>\n          <p><b>Comments:</b> ${hit.comments}</p>\n          <p><b>Downloads:</b> ${hit.downloads}</p>\n        </div>\n      </li>\n    `\n    )\n    .join(\"\");\n\n  if (replace) {\n    gallery.innerHTML = markup;\n  } else {\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n  }\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox(\".gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250,\n    });\n  }\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery, clearGallery, showLoader, hideLoader } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst loader = document.querySelector(\".loader\");\n\nlet query = '';\nlet page = 1;\nconst PER_PAGE = 12;\nlet totalLoaded = 0;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n  query = form.elements[\"search-text\"].value.trim();\n  if (!query) {\n    iziToast.warning({\n      message: \"Please enter a search term!\",\n      position: \"topRight\",\n    });\n    return;\n  }\n  page = 1;\n  totalLoaded = 0;\n  totalHits = 0;\n  clearGallery(gallery);\n  showLoader();\n  loadMoreBtn.style.display = \"none\";\n\n  try {\n    const data = await fetchImages(query, page, PER_PAGE);\n    const images = data.hits;\n    totalHits = data.totalHits || 0;\n    if (!images || images.length === 0) {\n      iziToast.error({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\",\n      });\n      hideLoader();\n      return;\n    }\n    renderGallery(images, gallery, true);\n    totalLoaded += images.length;\n    if (totalLoaded < totalHits) {\n      loadMoreBtn.style.display = \"inline-block\";\n    }\n  } catch (error) {\n    iziToast.error({\n      message: \"Sorry, something went wrong. Please try again later.\",\n      position: \"topRight\",\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  page++;\n  showLoader();\n  try {\n    const data = await fetchImages(query, page, PER_PAGE);\n    const images = data.hits;\n    if (!images || images.length === 0) {\n      iziToast.info({\n        message: \"You've reached the end of the results.\",\n        position: \"topRight\",\n      });\n      loadMoreBtn.style.display = \"none\";\n      hideLoader();\n      return;\n    }\n    renderGallery(images, gallery, false);\n    totalLoaded += images.length;\n    if (totalLoaded >= totalHits) {\n      iziToast.info({\n        message: \"You've reached the end of the results.\",\n        position: \"topRight\",\n      });\n      loadMoreBtn.style.display = \"none\";\n    }\n\n    const firstCard = gallery.firstElementChild;\n    if (firstCard) {\n      const { height: cardHeight } = firstCard.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: \"Could not load more images.\",\n      position: \"topRight\",\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","url","response","axios","error","lightbox","loader","clearGallery","gallery","showLoader","hideLoader","renderGallery","images","replace","markup","hit","SimpleLightbox","form","loadMoreBtn","PER_PAGE","totalLoaded","totalHits","event","data","firstCard","cardHeight"],"mappings":"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"}